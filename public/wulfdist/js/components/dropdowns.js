!function(a){"function"==typeof define&&define.amd?define(["jquery","bootstrap","fuelux/selectlist","./scroll","./keyboard/keyboard-core"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c,require("bootstrap"),require("fuelux"),require("./scroll"),require("./keyboard/keyboard-core")),c}:a(jQuery)}(function(a){"use strict";function b(){var b=a(this);b.removeAttr("data-original-title"),b.removeAttr("title");var c=b.find("span").not(".checkbox"),e=d(c.html(),c);e>=b.width()?(c.addClass("active"),c.css("border-bottom-color","transparent"),b.attr("data-original-title",a(c).html()),b.tooltip("show")):b.tooltip("hide")}function c(){var b=a(this);b.removeAttr("data-original-title"),b.removeAttr("title");for(var c=b.find(".selected-label"),e=c.find("span"),f=0,g="",h=0;h<e.length;h++)f+=a(e[h]).width(),g=g.concat(a(e[h]).html());var i=d(g,c);i>=c.width()?(b.attr("data-original-title",g),b.tooltip("show")):b.tooltip("hide")}function d(b,c){var d=a("<span>").hide().appendTo(document.body);""!==c.css("font")?a(d).html(b).css("font",c.css("font")):a(d).html(b).css("font-size",c.css("font-size"));var e=d.width();return d.remove(),e}function e(){var b=a(this),c=b.find("ul");"fixed"===b.data("position")&&(c.css("position","fixed"),c.css("top",a(this).offset().top+a(this).parent().height()-a(document).scrollTop()),c.css("left",a(this).offset().left-a(document).scrollLeft()),c.width(a(this).parent().width()))}function f(){a(".dropdown-menu").each(function(){"block"===a(this).css("display")&&"fixed"===a(this).closest(".selectlist").data("position")&&a(this).parent().find("button.dropdown-toggle").trigger("click")})}function g(b){var c=b.offset().left,d=b.find("> .dropdown-menu");d.css("width","auto");var e=d.width(),f=a(window).width();c+e>f&&d.width(f-c-20)}function h(){var b=a(this).closest(".selectlist"),c=a(this).closest("li").data("value");b.selectlist("selectByValue",c)}a.fn.extend({adaptiveSelectlist:function(){a(this).on("shown.bs.dropdown",function(){g(a(this))})}}),a(document).ready(function(){a('[data-toggle="tooltip"]').length>0&&a('[data-toggle="tooltip"]').tooltip({container:"body"}),a(".n-dropdown-menu-scroll").on("click",".mCSB_dragger_bar,.mCSB_draggerRail",function(a){a.stopPropagation()});var b='<p class="prompt">--Select items--</p>';a(".selectlist-multiple").find(".selected-label").empty().append(b),a(".selectlist-multiple ul").on("click",function(a){a.stopPropagation()}),a('.selectlist-multiple input[type="checkbox"]').on("click",function(){var b,c="",d=a(this).next().children().text(),e=a(this).closest(".selectlist-multiple");if(a(this).is(":checked"))b=e.find(".selected-label").find("span").length>0?'<span wulf-title="'+d+'">, '+d+"</span>":'<span wulf-title="'+d+'">'+d+"</span>",e.find(".prompt").hide(),e.find(".selected-label").append(b),e.find("button").find("span[wulf-title]").each(function(){c+=a(this).text()}),e.find("button").attr("data-original-title",c);else{e.find('span[wulf-title="'+d+'"]').remove();var f=a(e.find("span").find("span").get(0));0===f.text().indexOf(", ")&&f.text(f.text().slice(2)),e.find("button").find("span[wulf-title]").each(function(){c+=a(this).text()}),e.find("button").attr("data-original-title",c),1===e.find(".selected-label").children().length&&(e.find(".prompt").show(),e.find("button").removeAttr("data-original-title"))}})}),a(document).on("shown.bs.dropdown",".n-table .selectlist",e).on("scroll.wf.dropdown",f).on("click.fu.selectlist",".n-table-scrollbar .selectlist .dropdown-menu a",h).on("click",".selectlist ul li a",function(){var b=a(this).closest(".selectlist");b.find(".btn.dropdown-toggle").removeAttr("data-original-title")}).on("mouseenter",".selectlist .dropdown-menu li a",b).on("focus",".selectlist .dropdown-menu li a",b).on("mouseleave",".selectlist .dropdown-menu li a",function(){var b=a(this),c=b.find("span").not(".checkbox");c.css("border-bottom-color",""),c.removeClass("active")}).on("blur",".selectlist .dropdown-menu li a",function(){var b=a(this),c=b.find("span").not(".checkbox");c.css("border-bottom-color",""),c.removeClass("active")}).on("mouseenter","[data-toggle='dropdown']",c).on("mouseenter",".n-combobutton-btn[data-toggle='tooltip']",c).on("focus",".n-combobutton-btn[data-toggle='tooltip']",c).on("mouseleave",".n-combobutton-btn[data-toggle='tooltip']",function(){var b=a(this);b.tooltip("hide")}).on("focus","[data-toggle='dropdown']",c).on("mouseleave","[data-toggle='dropdown']",function(){var b=a(this);b.tooltip("hide")}).on("keypress.n-dropdown-menu-scroll",function(b){var c=String.fromCharCode(b.which),d=document.activeElement,e=a(b.target).parent();"a"===d.tagName.toLowerCase()&&(e=a(b.target).closest("ul")),e.find("li").each(function(b,d){if(a(d).text().charAt(0).toLowerCase()===c){var e=a(d).closest("ul"),f=a(d).children("a");return a(e).mCustomScrollbar("scrollTo",f,{scrollInertia:0}),!1}})}),a(window).on("resize.wf.dropdown",f),a(window).on("resize.wf.dropdown",function(){a(".selectlist").each(function(){a(this).hasClass("open")&&g(a(this))})}),a(document).on("keydown.wf.dropdown.keyboard",".dropdown-menu",a.wfKBCore.commonKeyboardHandler)});