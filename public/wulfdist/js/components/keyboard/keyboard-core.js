!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c),c}:a(jQuery)}(function(a){"use strict";function b(a){return a.hasClass("n-list-group-item")?a.is("dd")?a.closest("dl"):a.closest("ul"):a.hasClass("tree-branch-name")||a.hasClass("tree-item-name")?a.closest("ul.tree"):a.closest("ul")}function c(a,b){var c=d(a),e=c.index(b.target);switch(b.keyCode){case n:e=b.shiftKey?e>0?e-1:0:e<c.length-1?e+1:c.length-1;break;case i:case k:e=e>0?e-1:0;break;case j:case l:e=e<c.length-1?e+1:c.length-1}return c.eq(e)}function d(b){if(b.children().children().hasClass("datepicker"))return b.children();if(b.children().hasClass("datepicker"))return b.parent().children();if(b.prev().children().hasClass("datepicker"))return b.parent().children();if(a(b).hasClass("n-list-group"))return a(b).is("dl")?b.find("dd"):b.find("li");if(a(b).hasClass("n-flyout-menu"))return b.find("li a");if(a(b).hasClass("n-banner-tabs")||a(b).hasClass("nav-tabs"))return b.children("li:not([disabled])").children("a");if(a(b).hasClass("dropdown-menu"))return b.closest("ul.n-banner-links").length>0?b.parent("li:not(.disabled)").find("a:not([disabled]):visible"):b.find("li:not(.disabled)").children("a:not([disabled]):visible");if(a(b).hasClass("tree")){for(var c=[],d=b.find("li:not(.hide) a"),e=0;e<=d.length-1;e++)f(a(d[e]))||c.push(d[e]);return a(c)}return a(b).is("tr")&&!g(b)?a(b).parent().is(".n-multicolumn-list thead")?b.find("th"):b.find("td"):a(b).hasClass("n-banner-links")||a(b).hasClass("n_banner_3rd_subItem")?b.children("li:not([disabled])").find(">a"):b.find("li")}function e(b,c){if(0!==a(b).find(".mCSB_container").length&&!a(c).closest("table").hasClass("datepicker-calendar-days")){var d=a(b).offset().top,e=a(c).offset().top,f=a(b).get(0).clientHeight,g=c.get(0).offsetHeight,h=e-d,i=h+g;return 10>h||i>f-10}}function f(a){for(var b=!1,c=a.parent();!c.hasClass("tree")&&!c.is("html");){if(c.closest("ul").hasClass("hidden")){b=!0;break}c=c.parent()}return b}function g(a){var b="none"===a.css("display"),c="hidden"===a.css("visibility"),d=0===a.height();return b||c||d}var h=32,i=37,j=39,k=38,l=40,m=27,n=9,o={commonKeyboardHandler:function(d){var f=[n,h,k,l,i,j,m];if(!(-1===f.indexOf(d.keyCode)||d.data&&d.data.notSupport&&-1!==d.data.notSupport.indexOf(d.keyCode))){var g=a(d.target);d.keyCode!==n&&d.preventDefault();var o,p;switch(d.keyCode){case n:"A"===g.get(0).tagName&&g.closest("ul").closest("div").hasClass("selectlist-multiple")&&g.find("input[type='checkbox']").focus(),o=b(a(d.target)),p=c(o,d),e(o,p)&&a(o).mCustomScrollbar("scrollTo",p,{scrollInertia:0});break;case m:"A"===g.get(0).tagName&&g.closest("ul").closest("div").hasClass("selectlist-multiple")?g.closest(".dropdown-menu").prev().trigger("click"):"INPUT"===g.get(0).tagName&&g.closest("ul").closest("div").hasClass("selectlist-multiple")&&(g.closest(".dropdown-menu").prev().trigger("click"),d.stopPropagation());break;case h:"A"===g.get(0).tagName&&g.closest("ul").closest("div").hasClass("selectlist-multiple")?g.find("input[type='checkbox']").trigger("click"):"INPUT"===g.get(0).tagName&&g.closest("ul").closest("div").hasClass("selectlist-multiple")?(g.trigger("click"),d.stopPropagation()):g.is("li")&&g.parent().hasClass("n-banner-nav")?g.closest("li").hasClass("disabled")||g.tab("show"):g.hasClass("n-close")?g.find(".icon-close").click():g.trigger("click");break;case k:case l:d.preventDefault(),d.stopPropagation(),o=b(a(d.target)),p=c(o,d),p.trigger("focus"),e(o,p)&&a(o).mCustomScrollbar("scrollTo",p,{scrollInertia:0,timeout:1});break;case i:case j:(g.is("a")&&(g.closest("ul").hasClass("n-banner-nav")||g.closest("ul").hasClass("nav-tabs"))||g.closest("ul").hasClass("n_banner_3rd_subItem"))&&(o=b(g),p=c(o,d),p.trigger("focus"))}}},getAllVisibleSubItems:function(a){return d(a)},isScrollNeeded:function(a,b){return e(a,b)},isHiddenElement:function(a){return g(a)}};a(document).on("keydown.wf.common.keyboard",".dropdown-menu",o.commonKeyboardHandler).on("keydown.wf.common.keyboard",".icon-close",{notSupport:[k,l]},o.commonKeyboardHandler).on("keydown.wf.common.keyboard",".n-close",{notSupport:[k,l]},o.commonKeyboardHandler).on("keydown.wf.common.keyboard","a[data-toggle=modal]",o.commonKeyboardHandler),a.wfKBCore=o});